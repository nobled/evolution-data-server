2005-06-22  Not Zed <NotZed@Ximian.com>

	* camel-mbox-summary.c: include the right db.h so we dont get an
	older one - DB_LAST was different(!).

	* camel-mbox-folder.c (mbox_get_folders): implement new folder
	iterface.

	* camel-mbox-store.c: re-arrange to get rid of forward decls.
	(mbox_get_folders): implement new folder interface.

	* camel-mbox-summary.c (camel_mbox_summary_next_uid)
	(camel_mbox_summary_last_uid): touch the root view when we change.

2005-06-16  Not Zed  <NotZed@Ximian.com>

	* camel-maildir-summary.c (camel_maildir_summary_init): cleanup
	bodgey hostnames.

	* camel-*.c: re-arranged so that class init conmes after virtual
	methods so i can get rid of all the messy shitty forward
	references.

	* camel-spool-summary.c (spool_summary_check): re-written
	(surprised?), we just check new mail (using a full sync) if the
	folder has changed.

	* camel-mbox-summary.c: remove more cruft.

	* camel-local-summary.c: remove some more cruft.

2005-06-16  Not Zed  <NotZed@Ximian.com>

	* camel-maildir-summary.c: ho hum, rewrote most of this too.  wont
	compile yet.

	* camel-mbox-summary.c (camel_mbox_summary_sync_mbox) 
	(summary_update): use the right uid cmp function.

	* camel-maildir-summary.h: cleaned up some cruft.

	* camel-mbox-folder.c (mbox_append_message): add the info within
	the write_lock to avoid re-sync races.

2005-06-15  Not Zed  <NotZed@Ximian.com>

	* camel-mbox-summary.c (camel_mbox_summary_sync_mbox): completely
	reimplemented.  Much more robust, etc, etc, haha, yeah right.

	* camel-local-folder.c (camel_local_folder_lock)
	(camel_local_folder_unlock): maintain our own reader count, and
	only physically lock/unlock if it is the first locker.

2005-06-14  Not Zed  <NotZed@Ximian.com>

	* camel-mbox-folder.c (mbox_lock): change locking so we don't
	.lock for read operations.  This should be a big and safe (within
	bounds) performance boost for reading many messages.
	(mbox_get_message): major changes, use only read locking now, and
	re-sync differently if the mailbox changed under us.

2005-06-11  Not Zed  <NotZed@Ximian.com>

	* camel-mbox-summary.c (mbox_sync_changes): implement a sync
	function, sync's changes to the mbox file if it can (i.e. nobody
	else has modified the mbox while we weren't looking).

2005-06-11  Not Zed  <NotZed@Ximian.com>

	* camel-local-folder.c (camel_local_folder_construct): dont sync
	immediately on open?

2005-06-10  Not Zed  <NotZed@Ximian.com>

	* camel-local-folder.c (local_search_by_expression)
	(local_search_by_uids, local_search_free): removed, just use
	parent folder-summary search.

2005-06-08  Not Zed  <NotZed@Ximian.com>

	** See bug #303225

	* camel-local-provider.c (local_url_equal): remove the checks for
	fields not used/appropriate for local resources.

2005-04-12  Not Zed  <NotZed@Ximian.com>

	* camel-local-provider.c (check_equal): make "" equal NULL for
	comparative purposes.

2005-03-18  Not Zed  <NotZed@Ximian.com>

	* camel-mbox-summary.c (mbox_summary_sync_quick): use a different
	fd for the mime parser, so the fd doesn't get closed twice.

2005-03-16  Not Zed  <NotZed@Ximian.com>

	** See bug #73401?

	* camel-mbox-summary.c (mbox_info_set_user_tag)
	(mbox_info_set_user_flag): do not flag xevchange here, these
	values are not stored in x-evolution-header anymore.

2005-02-24  Not Zed  <NotZed@Ximian.com>

	** See bug #57185

	* camel-mh-summary.c (mh_summary_sync_message): removed.  dont
	re-write people's mh mail just to add an xev header.  we should be
	looking at .mh_sequences or something.  Partial fix for #57185.

2005-02-24  Not Zed  <NotZed@Ximian.com>

	** See bug #59507

	* camel-spool-store.c (spool_get_full_path): handle mbox/elm cases
	explictly, not based on stat of path.
	(spool_get_meta_path): store all meta files in ~/.evolution
	somewhere.

	* camel-local-folder.c (camel_local_folder_construct): remove the
	special case test for a direct folder, leave it to subclasses to
	decide.

	* camel-local-store.c (local_get_trash, local_get_junk): calculate
	the state file based on the new store get_meta_path calls.  Also
	use the CAMEL_VJUNK_NAME, etc.

	* camel-local-folder.c, camel-local-store.c: Moved the
	get_meta_path and get_full_path routines to the store instead of
	the folder.  fix all subclasses.

2005-02-23  Not Zed  <NotZed@Ximian.com>

	** See bug #71812

	* camel-mbox-summary.c (camel_mbox_summary_sync_mbox): clear the
	working flags after we've successfully performed a full sync, they
	are no longer needed.

2005-02-01  Not Zed  <NotZed@Ximian.com>

	* camel-maildir-store.c (get_folder_info): set the
	folder type of inbox properly.

	* started new chnagelog.

